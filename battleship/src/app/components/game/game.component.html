<div class="container">

    <!-- Se c'Ã¨ un solo giocatore nella room -->
    <h2 style="text-align:center" *ngIf="players == false"> Lobby creata, attendi un avversario...

        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>


    </h2>

    <!-- 1 Fase del gioco: Posizionamento navi -->
    <div class="posizionamento" *ngIf="!end && players && !gamedata.sent">

        <h2>Fase di Posiziamento - Posiziona le tue barche</h2>

        <p *ngIf="ship_try.length > 0">Stai posizionando la nave lunga <strong>{{ship_try[0]}}</strong></p>
        <p *ngIf="ship_try.length == 0">Hai terminato le tue barche da posizionare, <strong>completa la fase di posizionamento</strong> per proseguire</p>

        <button *ngIf="players != false && !gamedata.sent" id="cambio" (click)="verPos($event)">Stai posizionando in: Orizzontale</button>
        <button *ngIf="ship_try.length < 3" (click)="deleteShips()">Rimuovi barche</button>
        <!-- ricordarsi di mettere la lunghezza vera dell'array di barche pls.-->
        <button *ngIf="ship_try.length == 0" (click)="submitBoard()">Completa la fase di posizionamento</button>

    </div>

    <!-- Operazioni sulle barche -->

    <div class="posizionamento">

        <!-- malino qui coi bottoni eh..-->
        <h2 *ngIf="gamedata.sent && !gamedata.received">Il tuo campo Ã¨ stato inviato correttamente all'avversario! <br> Il gioco partirÃ  non appena il tuo avversario finirÃ  di posizionare le sue barche.</h2>

        <div *ngIf="gamedata.sent && !gamedata.received" class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>

    </div>

    <div *ngIf="!end" class="tabella">

        <!-- Turno -->
        <div class="posizionamento" *ngIf="gamedata.received && gamedata.sent">
            <h3 *ngIf="gamedata.turno == gamedata.numeroGiocatore"> E' il tuo turno! Fai la tua mossa</h3>
            <h3 *ngIf="gamedata.turno != gamedata.numeroGiocatore"> E' il turno dell'avversario</h3>
        </div>

        <!-- Campo Giocatore -->
        <div *ngFor="let board of boards | slice:0:1; let i = index">
            <table>
                <tr *ngFor="let row of board.tiles; let j = index">
                    <td *ngFor="let col of row; let k = index" (click)="shipPositioning($event)" [style.background-color]="col.value == 1 ? 'green' : 'transparent'" [class.miss]="col.status == 'miss'" [class.hit]="col.status =='hit'" [class.win]="col.status == 'win'" [class.fail]="col.status !== 'win'"
                        class="battleship-tile" id="t{{i}}{{j}}{{k}}">
                        {{ col.value == "1" ? (col.status == "hit" ? "ðŸ’€" : "ðŸš¢") : (col.status == "miss" ? "â›¶" : (col.status == "hit" ? "ðŸ’€" : "ðŸŒŠ")) }}
                    </td>
                </tr>
            </table>
        </div>

        <hr>

        <!-- Campo Avversario -->
        <div *ngIf="gamedata.received && gamedata.sent">
            <div *ngFor="let board of boards | slice:1:2; let i = index">
                <table>
                    <tr *ngFor="let row of board.tiles; let j = index">
                        <td *ngFor="let col of row; let k = index" (click)="playerOneClick($event)" [style.background-color]="col.used ? '' : 'transparent'" [class.win]="col.status == 'win'" [class.fail]="col.status !== 'win'" class="battleship-tile" id="t{{i}}{{j}}{{k}}">
                            {{ col.value == "1" ? (col.status == "hit" ? "ðŸ’€" : " ") : (col.status == "miss" ? "â›¶" : (col.status == "hit" ? "ðŸ’€" : " ")) }}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Vittoria/Sconfitta -->
    <div>
        <br><br><br><br><br><br><br><br><br><br>

        <h1 style="text-align:center" *ngIf="end && score == 1 ">Hai Vinto! Complimenti! <br> Per concludere il gioco lascia questa pagina, grazie.</h1>
        <h1 style="text-align:center" *ngIf="end && score < 1">Mi spiace, hai perso! <br> Per concludere il gioco lascia questa pagina, grazie.</h1>
        <h1 style="text-align:center" *ngIf="end && score == 1000 ">Hai Vinto! Il tuo Avverario si Ã¨ ritirato! <br> Per concludere il gioco lascia questa pagina, grazie.</h1>
    </div>

</div>