<div class="container">


    <!-- Se c'Ã¨ un solo giocatore nella room -->
    <h2 *ngIf="players == false">Aspettando un secondo giocatore...</h2>

    <!-- 1 Fase del gioco: Posizionamento navi -->
    <div class="posizionamento" *ngIf="players && !gamedata.sent">
        <h2>Fase di Posiziamento - Posiziona le tue barche</h2>
        <p *ngIf="!submittable">Stai per posizionare la nave da {{ship_try[0]}} unitÃ </p>
    </div>

    <!-- Operazioni sulle barche -->
    <div class="posizionamento">
        <button *ngIf="players != false && !gamedata.sent" id="cambio" (click)="verPos($event)">Posizionamento Verticale</button>
        <button *ngIf="deletable" (click)="deleteShips()">Rimuovi barche</button>
        <button *ngIf="submittable" (click)="submitBoard()">Fine Fase di Posizionamento</button>
        <h2 *ngIf="gamedata.sent && !gamedata.received">Il tuo campo Ã¨ stato inviato correttamente <br> Il gioco partirÃ  non appena il tuo Avversario finirÃ  di posizionare le sue barche</h2>
    </div>

    <div *ngIf="gamedata.notOver" class="tabella">

        <!-- Turno -->
        <div class="posizionamento" *ngIf="gamedata.received && gamedata.sent">
            <h3 *ngIf="gamedata.turno == gamedata.numeroGiocatore"> E' il tuo turno! Fai la tua mossa</h3>
            <h3 *ngIf="gamedata.turno != gamedata.numeroGiocatore"> E' il turno dell'avversario</h3>
        </div>

        <!-- Campo Giocatore -->
        <div *ngFor="let board of boards | slice:0:1; let i = index">
            <table [style.opacity]="i == player ? 0.5 : 1">
                <tr *ngFor="let row of board.tiles; let j = index">
                    <td *ngFor="let col of row; let k = index" (click)="shipPositioning($event)" [style.background-color]="col.value == 1 ? 'black' : 'transparent'" [class.miss]="col.status == 'miss'" [class.hit]="col.status =='hit'" [class.win]="col.status == 'win'" [class.fail]="col.status !== 'win'"
                        class="battleship-tile" id="t{{i}}{{j}}{{k}}">
                        {{ col.value == "1" ? (col.status == "hit" ? "ðŸ’€" : "X") : (col.status == "miss" ? "â›¶" : (col.status == "hit" ? "ðŸ’€" : "ðŸŒŠ")) }}
                    </td>
                </tr>
            </table>
        </div>

        <hr>

        <!-- Campo Avversario -->
        <div *ngIf="gamedata.received && gamedata.sent">
            <div *ngFor="let board of boards | slice:1:2; let i = index">
                <table>
                    <tr *ngFor="let row of board.tiles; let j = index">
                        <td *ngFor="let col of row; let k = index" (click)="playerOneClick($event)" [style.background-color]="col.used ? '' : 'transparent'" [class.win]="col.status == 'win'" [class.fail]="col.status !== 'win'" class="battleship-tile" id="t{{i}}{{j}}{{k}}">
                            {{ col.value == "1" ? (col.status == "hit" ? "ðŸ’€" : " ") : (col.status == "miss" ? "â›¶" : (col.status == "hit" ? "ðŸ’€" : " ")) }}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Vittoria/Sconfitta -->
    <div>
        <h1 *ngIf="end">Hai Vinto! Complimenti! Per concludere il gioco lascia questa pagina, grazie.</h1>
        <h1 *ngIf="gamedata.loses">Hai Perso! ahaha nub! Per concludereil gioco lascia questa pagina, grazie.</h1>
    </div>

</div>