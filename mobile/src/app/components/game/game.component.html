<div>
    <button (click)="israel()">cliccami per porre fine allo stato di Israele</button>
</div>


<!-- ./src/app/app.component.html -->
<div class="section">
    <div class="container">
        <div class="content">
            <h1 class="title">Ready to sink some battleships?</h1>
            <hr>

            <!-- shows when a player has won the game -->
            <section *ngIf="winner" class="notification is-success has-text-centered" style="color:white">
                <!--<h1>Player {{ winner.player.getUsername }} has won the game!</h1>-->
            </section>

            <!-- shows while waiting for 2nd user to join -->
            <div *ngIf="players == false">
                <h2>Waiting for 2nd user to join...</h2>
            </div>

            <div *ngIf="players && !gamedata.sent">
                <h2>Fase di Posiziamento - Posiziona le tue barche</h2>
                <p *ngIf="!submittable">Stai posizionando la Barca da {{ship_try[0]}} unitÃ </p>

                <button id="cambio" (click)="verPos($event)">Posizionamento Verticale</button>
            </div>

            <div *ngIf="end">
                <h2>You win! congratulations! leave this tab to start another game.</h2>
            </div>
            <div *ngIf="gamedata.loses">
                <h2>You lose, leave this tab to start another game.</h2>
            </div>

            <div *ngIf="submittable">
                <button (click)="submitBoard()">inizia l'intifada</button>
            </div>
            <div *ngIf="deletable">
                <button (click)="deleteShips()">cancella israele</button>
            </div>

            <!-- loops through the boards array and displays the player and board tiles -->
            <div *ngIf="gamedata.notOver" class="columns">
                <div class="column has-text-centered" *ngFor="let board of boards | slice:0:1; let i = index">
                    <table class="is-bordered" [style.opacity]="i == player ? 0.5 : 1">
                        <tr *ngFor="let row of board.tiles; let j = index">
                            <td *ngFor="let col of row; let k = index" (click)="shipPositioning($event)" [style.background-color]="col.value == 1 ? 'black' : 'transparent'" [class.miss]="col.status == 'miss'" [class.hit]="col.status =='hit'" [class.win]="col.status == 'win'" [class.fail]="col.status !== 'win'"
                                class="battleship-tile" id="t{{i}}{{j}}{{k}}">
                                {{ col.value == "1" ? (col.status == "hit" ? "ðŸ’€" : "X") : (col.status == "miss" ? "â›¶" : (col.status == "hit" ? "ðŸ’€" : "ðŸŒŠ")) }}
                            </td>
                        </tr>
                    </table>
                    <hr>

                </div>
                <div *ngIf="gamedata.received && gamedata.sent">
                    <div class="column has-text-centered" *ngFor="let board of boards | slice:1:2; let i = index">
                        <table class="is-bordered">
                            <tr *ngFor="let row of board.tiles; let j = index">
                                <td *ngFor="let col of row; let k = index" (click)="playerOneClick($event)" [style.background-color]="col.used ? '' : 'transparent'" [class.win]="col.status == 'win'" [class.fail]="col.status !== 'win'" class="battleship-tile" id="t{{i}}{{j}}{{k}}">
                                    {{ col.value == "1" ? (col.status == "hit" ? "ðŸ’€" : "") : (col.status == "miss" ? "â›¶" : (col.status == "hit" ? "ðŸ’€" : "")) }}
                                </td>
                            </tr>
                        </table>
                        <hr>

                    </div>
                </div>
            </div>

            <div class="has-text-centered">
                <span class="tag is-warning" *ngIf="gamedata.turno == gamedata.numeroGiocatore"> Your turn!</span>
                <span class="tag is-danger" *ngIf="gamedata.turno != gamedata.numeroGiocatore"> Other player's turn.</span>
                <h5 class="title"><small>{{ players }} player(s) in game</small></h5>
            </div>

        </div>
    </div>
</div>